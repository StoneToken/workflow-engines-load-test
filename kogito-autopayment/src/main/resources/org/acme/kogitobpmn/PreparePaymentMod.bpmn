<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://org.eclipse.bpmn2/ext" xmlns:sbt="http://com.sbt/bpms/modeler" xmlns:tl="http://www.w3.org/2001/XMLSchema" id="a5ab65c5-5346-4a9a-a161-76f082fdbdf8" targetNamespace="http://com.sbt/bpms/modeler" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="9.0.3" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd">
  <bpmn2:message id="bbb5bdd1-7177-44fa-aa57-d4a24f6ac63d" name="PreparePayment">
    <bpmn2:extensionElements>
      <ext:style />
    </bpmn2:extensionElements>
  </bpmn2:message>
  <bpmn2:process id="c8975a93-5d6f-4fbe-b518-d325ada07e71" name="PreparePayment" isExecutable="true" sbt:bamProjectId="" sbt:businessFamily="" sbt:externalVersion="" sbt:processOwner.roleCode="" sbt:processOwner.roleDescription="" sbt:processOwner.roleName="">
    <bpmn2:laneSet id="f1cb6c6a-fd65-4d93-ba95-7e869d9dddb9" name="New Lane Set ">
      <bpmn2:lane id="ca06b2ee-71a5-4252-ac4a-ec4c20426a0f" name="BPM" sbt:Role.roleCode="" sbt:Role.roleDescription="" sbt:Role.roleName="" sbt:managerRole.roleCode="" sbt:managerRole.roleDescription="" sbt:managerRole.roleName="">
        <bpmn2:flowNodeRef>d675af26-b12c-4fbf-aad6-0294013d6acf</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>f6cf4fb3-8666-493a-b723-a67d2b90375b</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>e9d90536-02ec-4e4e-857a-6ef1c7631331</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>fa7b78a1-0a53-4f48-83c5-f82f2f9f2396</bpmn2:flowNodeRef>
      </bpmn2:lane>
    </bpmn2:laneSet>
    <bpmn2:startEvent id="d675af26-b12c-4fbf-aad6-0294013d6acf">
      <bpmn2:outgoing>cc019249-abaf-4aa2-b3e4-6eceab438c6b</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:task id="f6cf4fb3-8666-493a-b723-a67d2b90375b" name="Подготовка платежа" sbt:apiSource="file" sbt:buildingBlockId="" sbt:initialUrl="http://localhost/at-api-payments/v1/payment/{executionAttemptId}:prepare" sbt:methodName="post" sbt:outputMapping="expression" sbt:payloadType="map" sbt:retryPolicyModelDescription="" sbt:retryPolicyModelId="" sbt:sbtType="com.sbt.bpms.modeler.plugin.marker.RestTask" sbt:timeout="PT10S" sbt:url="http://at-payments-ms-service:13060/at-api-payments/v1/payment/{executionAttemptId}:prepare" sbt:serviceType="buildingBlock">
      <bpmn2:extensionElements>
        <sbt:inputParamList>
          <sbt:inputParam id="c4ab5b07-08eb-4cc2-a38c-8a1d43d188ab">
            <sbt:name>executionAttemptId</sbt:name>
            <sbt:type text="required string (long)">required string (long)</sbt:type>
            <sbt:variableName text="${execution.getVariable(&#34;executionAttemptId&#34;)}">${execution.getVariable("executionAttemptId")}</sbt:variableName>
            <sbt:inType>path</sbt:inType>
          </sbt:inputParam>
          <sbt:inputParam id="3e5482c4-f384-4d61-acf9-2765fd0006b5">
            <sbt:name>processId</sbt:name>
            <sbt:type text="string">string</sbt:type>
            <sbt:variableName text="${execution.getProcessInstanceId()}">${execution.getProcessInstanceId()}</sbt:variableName>
            <sbt:inType>requestBody</sbt:inType>
          </sbt:inputParam>
        </sbt:inputParamList>
        <sbt:responseParamList>
          <sbt:responseParam id="d2d98159-c66d-4853-9c3a-3ccc04d0a236">
            <sbt:httpCode>200</sbt:httpCode>
          </sbt:responseParam>
          <sbt:responseParam id="bf643473-0205-4060-873e-e05e6926ed15">
            <sbt:httpCode>400</sbt:httpCode>
            <sbt:contentType>application/json</sbt:contentType>
            <sbt:type>object (code: required integer (int32), message: string, details: oneOf: Schema BadRequest)</sbt:type>
          </sbt:responseParam>
          <sbt:responseParam id="c49b7948-b695-45b7-8884-c5d3964ccc5b">
            <sbt:httpCode>404</sbt:httpCode>
            <sbt:contentType>application/json</sbt:contentType>
            <sbt:type>object (code: required integer (int32), message: string, details: oneOf: Schema ResourceInfo)</sbt:type>
          </sbt:responseParam>
        </sbt:responseParamList>
        <sbt:httpHeaderList>
          <sbt:httpHeader id="d3cf69df-77c5-4721-a8d5-bfa4c5dc6aa6">
            <sbt:name>Content-Type</sbt:name>
            <sbt:value>application/json</sbt:value>
          </sbt:httpHeader>
        </sbt:httpHeaderList>
      </bpmn2:extensionElements>
      <bpmn2:incoming>cc019249-abaf-4aa2-b3e4-6eceab438c6b</bpmn2:incoming>
      <bpmn2:outgoing>ba73762d-9c72-4e48-97ba-01995ad924db</bpmn2:outgoing>
    </bpmn2:task>
    <bpmn2:intermediateCatchEvent id="e9d90536-02ec-4e4e-857a-6ef1c7631331" name="Получен ответ на запрос" sbt:marker.type="Markable" sbt:sbtType="com.sbt.bpms.modeler.plugin.marker.markableIntermediateCatchEvent">
      <bpmn2:incoming>ba73762d-9c72-4e48-97ba-01995ad924db</bpmn2:incoming>
      <bpmn2:outgoing>bb8d922a-3f26-4b00-8839-6b3f797320af</bpmn2:outgoing>
      <bpmn2:messageEventDefinition id="e90db4fd-fef6-4a9b-b95d-00025d443a5f" messageRef="bbb5bdd1-7177-44fa-aa57-d4a24f6ac63d" />
    </bpmn2:intermediateCatchEvent>
    <bpmn2:endEvent id="fa7b78a1-0a53-4f48-83c5-f82f2f9f2396" sbt:marker.type="Markable" sbt:sbtType="com.sbt.bpms.modeler.plugin.marker.markableEndEvent">
      <bpmn2:incoming>bb8d922a-3f26-4b00-8839-6b3f797320af</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:sequenceFlow id="bb8d922a-3f26-4b00-8839-6b3f797320af" sourceRef="e9d90536-02ec-4e4e-857a-6ef1c7631331" targetRef="fa7b78a1-0a53-4f48-83c5-f82f2f9f2396" />
    <bpmn2:sequenceFlow id="ba73762d-9c72-4e48-97ba-01995ad924db" sourceRef="f6cf4fb3-8666-493a-b723-a67d2b90375b" targetRef="e9d90536-02ec-4e4e-857a-6ef1c7631331" />
    <bpmn2:sequenceFlow id="cc019249-abaf-4aa2-b3e4-6eceab438c6b" sourceRef="d675af26-b12c-4fbf-aad6-0294013d6acf" targetRef="f6cf4fb3-8666-493a-b723-a67d2b90375b" />
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="ceffd90b-f60b-4a15-9e73-2d9ac5747810">
    <bpmndi:BPMNPlane id="e59a2c66-6811-4859-8203-7ed9df826b1a" bpmnElement="c8975a93-5d6f-4fbe-b518-d325ada07e71">
      <bpmndi:BPMNShape id="a9bb60a8-7df0-4fc8-82a0-6c713a1ee873" bpmnElement="ca06b2ee-71a5-4252-ac4a-ec4c20426a0f" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="821" height="461" />
        <bpmndi:BPMNLabel id="ab419a67-af62-4dff-a1f0-d8f8f74f880a" labelStyle="f2ecaca1-3a02-4358-b754-adfe0ac1244f">
          <dc:Bounds x="286" y="235" width="17" height="31" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="ad32acad-06fe-49a6-9353-b4d5ad57ea61" bpmnElement="cc019249-abaf-4aa2-b3e4-6eceab438c6b" sourceElement="fac0a302-dbbf-4fb3-9bce-8d4a8284c713" targetElement="be092726-35d4-4746-8c0d-b47c6a22a4fa">
        <di:waypoint x="296" y="308" />
        <di:waypoint x="353" y="308" />
        <di:waypoint x="410" y="307" />
        <bpmndi:BPMNLabel id="ae8acb24-3a22-4f33-814a-6a886f7b6e15" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="a98107be-4ad4-427e-80f1-680ebb6c2783" bpmnElement="ba73762d-9c72-4e48-97ba-01995ad924db" sourceElement="be092726-35d4-4746-8c0d-b47c6a22a4fa" targetElement="e7984731-d877-4e7b-aa09-8c25dab53695">
        <di:waypoint x="531" y="307" />
        <di:waypoint x="590" y="307" />
        <di:waypoint x="650" y="308" />
        <bpmndi:BPMNLabel id="e23dacdb-1948-45a8-ac58-436a0fd8e684" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="b0105533-ae0e-48eb-91e4-e1c26860d0d4" bpmnElement="bb8d922a-3f26-4b00-8839-6b3f797320af" sourceElement="e7984731-d877-4e7b-aa09-8c25dab53695" targetElement="dcee25c1-1d7d-4aff-a004-716f470fa889">
        <di:waypoint x="686" y="308" />
        <di:waypoint x="743" y="308" />
        <di:waypoint x="800" y="307" />
        <bpmndi:BPMNLabel id="d1f5a09b-31f4-469c-a4aa-5507450d48a4" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="fac0a302-dbbf-4fb3-9bce-8d4a8284c713" bpmnElement="d675af26-b12c-4fbf-aad6-0294013d6acf">
        <dc:Bounds x="260" y="290" width="36" height="36" />
        <bpmndi:BPMNLabel id="f65271a8-6716-4b4a-8af5-fb5ad652d6bf" labelStyle="f2ecaca1-3a02-4358-b754-adfe0ac1244f" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="be092726-35d4-4746-8c0d-b47c6a22a4fa" bpmnElement="f6cf4fb3-8666-493a-b723-a67d2b90375b" isExpanded="true">
        <dc:Bounds x="410" y="267" width="121" height="81" />
        <bpmndi:BPMNLabel id="ac9dcf25-c542-445e-a393-550f848a4eb5" labelStyle="f2ecaca1-3a02-4358-b754-adfe0ac1244f">
          <dc:Bounds x="412" y="300" width="117" height="15" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="e7984731-d877-4e7b-aa09-8c25dab53695" bpmnElement="e9d90536-02ec-4e4e-857a-6ef1c7631331">
        <dc:Bounds x="650" y="290" width="36" height="36" />
        <bpmndi:BPMNLabel id="d9aaa3a6-a091-4bd5-ac27-53156a2d6f57" labelStyle="f2ecaca1-3a02-4358-b754-adfe0ac1244f">
          <dc:Bounds x="631" y="326" width="75" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="dcee25c1-1d7d-4aff-a004-716f470fa889" bpmnElement="fa7b78a1-0a53-4f48-83c5-f82f2f9f2396">
        <dc:Bounds x="800" y="289" width="36" height="36" />
        <bpmndi:BPMNLabel id="c27efb3c-8954-47e8-8ff3-81e8ad69b535" labelStyle="f2ecaca1-3a02-4358-b754-adfe0ac1244f" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
    <bpmndi:BPMNLabelStyle id="f2ecaca1-3a02-4358-b754-adfe0ac1244f">
      <dc:Font name="arial" size="9" />
    </bpmndi:BPMNLabelStyle>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>
